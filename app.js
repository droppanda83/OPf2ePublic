let entries = []; if (Array.isArray(data)) { entries = data; } else if (Array.isArray(data?.characters)) { entries = data.characters; } else if (Array.isArray(data?.builds)) { entries = data.builds; } else if (data?.build) { entries = [data.build]; } else if (data?.character) { entries = [data.character]; } else if (data) { entries = [data]; } return entries .map((entry) => { const details = entry?.character ?? entry?.build ?? entry; const name = details?.name ?? details?.character_name ?? details?.build?.name ?? null; const ancestry = details?.ancestry ?? details?.ancestry_name ?? details?.build?.ancestry ?? details?.ancestry?.name ?? "Unknown"; const className = details?.class ?? details?.class_name ?? details?.character_class ?? details?.build?.class ?? details?.class?.name ?? "Unknown"; const level = details?.level ?? details?.character_level ?? details?.build?.level ?? "?"; const hp = details?.hit_points ?? details?.hp ?? details?.attributes?.hp ?? details?.build?.attributes?.hp ?? details?.build?.hp ?? "?"; const hasDetails = name || details?.character_name || details?.build?.name || details?.class || details?.ancestry; if (!hasDetails) { return null; } return { name: name ?? "Unknown Hero", ancestry, className, level, hp, }; }) .filter(Boolean);